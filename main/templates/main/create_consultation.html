{% extends 'main/base.html' %}
{% load static %}

{% block title %}Create Consultation - EcoNest Interiors{% endblock %}

{% block content %}

<section class="section">
  <div class="container">
    <div style="max-width:800px;margin:0 auto;">
      <h2 class="center" style="margin-bottom:30px;">Create New Consultation</h2>
      
      {% if messages %}
      <div style="margin-bottom:20px;">
        {% for message in messages %}
        <div style="padding:15px;margin-bottom:10px;border-radius:8px;background:{% if message.tags == 'error' %}#f8d7da{% else %}#d4edda{% endif %};color:{% if message.tags == 'error' %}#721c24{% else %}#155724{% endif %};">
          {{ message }}
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <form method="post" action="{% url 'create_consultation' %}" style="background:#fff;padding:30px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
        {% csrf_token %}

        <div class="form-field">
          <label for="name">Name *</label>
          <input id="name" name="name" type="text" required style="width:100%;padding:12px;border:1px solid #ddd;border-radius:6px;font-size:16px;" />
        </div>

        <div class="form-field">
          <label for="email">Email *</label>
          <input id="email" name="email" type="email" required style="width:100%;padding:12px;border:1px solid #ddd;border-radius:6px;font-size:16px;" />
        </div>

        <div class="form-field">
          <label for="phone">Phone *</label>
          <input id="phone" name="phone" type="tel" required style="width:100%;padding:12px;border:1px solid #ddd;border-radius:6px;font-size:16px;" />
        </div>

        <div class="form-field">
          <label for="service">Service *</label>
          <select id="service" name="service" required style="width:100%;padding:12px;border:1px solid #ddd;border-radius:6px;font-size:16px;">
            <option value="">Select a service</option>
            {% for service in unique_services %}
            <option value="{{ service }}">{{ service }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="form-field">
          <label for="appointment_date">Appointment Date *</label>
          <input id="appointment_date" name="appointment_date" type="date" required style="width:100%;padding:12px;border:1px solid #ddd;border-radius:6px;font-size:16px;" />
        </div>

        <div style="display:flex;gap:15px;margin-top:30px;">
          <button type="submit" class="button primary" style="flex:1;padding:15px;font-size:16px;font-weight:600;">Create Consultation</button>
          <a href="{% url 'dashboard' %}" class="button" style="flex:1;padding:15px;font-size:16px;text-align:center;text-decoration:none;display:flex;align-items:center;justify-content:center;">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</section>

{% endblock %}

