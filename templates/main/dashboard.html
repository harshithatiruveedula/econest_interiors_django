{% extends 'main/base.html' %}
{% load static %}

{% block content %}

<section class="section">
  <div class="container">
    <h2 class="text-center" style="margin-bottom: 30px;">Admin Dashboard</h2>

    <div class="grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;">

      <div class="card" style="padding:20px;background:#f7f7f7;border-radius:10px;">
        <h3>Total Bookings</h3>
        <p style="font-size:24px;font-weight:bold;">{{ total_bookings }}</p>
      </div>

      <div class="card" style="padding:20px;background:#f7f7f7;border-radius:10px;">
        <h3>Total Services</h3>
        <p style="font-size:24px;font-weight:bold;">{{ total_services }}</p>
      </div>

      <div class="card" style="padding:20px;background:#f7f7f7;border-radius:10px;">
        <h3>Total Gallery Images</h3>
        <p style="font-size:24px;font-weight:bold;">{{ total_images }}</p>
      </div>

      <div class="card" style="padding:20px;background:#f7f7f7;border-radius:10px;">
        <h3>Total Blog Posts</h3>
        <p style="font-size:24px;font-weight:bold;">{{ total_posts }}</p>
      </div>

    </div>

    <h3 style="margin-top:40px;margin-bottom:15px;">Recent Bookings</h3>

    <table style="width:100%;border-collapse:collapse;">
      <tr style="background:#333;color:#fff;">
        <th style="padding:10px;border:1px solid #ccc;">Name</th>
        <th style="padding:10px;border:1px solid #ccc;">Email</th>
        <th style="padding:10px;border:1px solid #ccc;">Phone</th>
        <th style="padding:10px;border:1px solid #ccc;">Service</th>
        <th style="padding:10px;border:1px solid #ccc;">Preferred Date</th>
        <th style="padding:10px;border:1px solid #ccc;">Booking Submitted At</th>
      </tr>

      {% for b in recent_bookings %}
      <tr>
        <td style="padding:10px;border:1px solid #ccc;">{{ b.name }}</td>
        <td style="padding:10px;border:1px solid #ccc;">{{ b.email }}</td>
        <td style="padding:10px;border:1px solid #ccc;">{{ b.phone }}</td>
        <td style="padding:10px;border:1px solid #ccc;">{{ b.service }}</td>
        <td style="padding:10px;border:1px solid #ccc;color:#0066cc;font-weight:bold;">
          {% if b.appointment_date %}
            {{ b.appointment_date|date:"F d, Y" }}
          {% else %}
            <span style="color:#999;">Not specified</span>
          {% endif %}
        </td>
        <td style="padding:10px;border:1px solid #ccc;">{{ b.submitted_at|date:"F d, Y g:i A" }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" style="padding:10px;border:1px solid #ccc;text-align:center;">No bookings yet</td>
      </tr>
      {% endfor %}

    </table>

  </div>
</section>

{% endblock %}
